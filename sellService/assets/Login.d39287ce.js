import{_ as v,s as f,a as x,o as y,c as S,w as r,g as b,r as d,b as s,d as l,e as _,t as k,n as C,p as V,f as w}from"./index.d0ff2185.js";var T="/sellService/assets/logo.b28bdd42.png";const I={setup(){const{proxy:t}=b();return{proxy:t}},data(){return{phone:"",code:"",sendText:"\u53D1\u9001\u9A8C\u8BC1\u7801",time:60,isSending:!1,sendTimer:null,notMyShow:!1,loginSuccessRe:"/",themes:{buttonDefaultBackgroundColor:"#DDFF55",buttonSmallHeight:"30px",buttonBorderWidth:"0px",buttonBorderRadius:"5px",buttonSmallFontSize:"14px",buttonDefaultColor:"#000000",buttonSmallPadding:"10px 20px 10px 20px",countDownTextColor:"rgba(0,0,0,0.5)"}}},mounted(){var t=this.$route.query.redirect;t!=null&&(this.loginSuccessRe=t)},methods:{checkPhone(){return/^[1][3,4,5,7,8][0-9]{9}$/.test(this.phone)?!0:(this.$toast("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u624B\u673A\u53F7"),!1)},sendCodeClick(){if(!this.isSending&&!!this.checkPhone()){var t={captchaType:"login",mobile:this.phone};this.proxy.$api.getPhoneCode(t).then(e=>{this.isSending=!0,this.time--,this.sendText=`${this.time}s\u540E\u91CD\u65B0\u83B7\u53D6`,this.sendTimer=setInterval(()=>{this.time--,this.time<=0?(this.time=60,this.isSending=!1,clearInterval(this.sendTimer),this.sendText="\u53D1\u9001\u9A8C\u8BC1\u7801"):this.sendText=`${this.time}s\u540E\u91CD\u65B0\u83B7\u53D6`},1e3)})}},loginClick(){if(!!this.checkPhone()){if(this.code==""){this.$toast("\u8BF7\u8F93\u5165\u60A8\u7684\u624B\u673A\u9A8C\u8BC1\u7801");return}var t={loginType:2,mobile:this.phone,credential:this.code};this.proxy.$api.phoneLogin(t).then(e=>{var c=e.data.token;console.log("\u767B\u5F55token",c),f(c),this.proxy.$api.getUserInfo().then(a=>{x(a.data),this.$router.replace(this.loginSuccessRe)}).catch(a=>{console.log("\u83B7\u53D6\u7528\u6237\u4FE1\u606F\u5931\u8D25",a)})}).catch(e=>{e.data.code==422&&e.data.message.indexOf("\u4E0D\u5B58\u5728")!=-1?(console.log("\u4E0D\u5B58\u5728",e.data.message),this.notMyShow=!0):this.$toast(e.data.message)})}}}},n=t=>(V("data-v-d0e4925e"),t=t(),w(),t),B={class:"mainPage"},D=n(()=>s("img",{class:"topImg",src:T},null,-1)),P=n(()=>s("div",{class:"marginV",style:{"--mH":"78px"}},null,-1)),H=n(()=>s("div",{class:"marginV",style:{"--mH":"40px"}},null,-1)),M={class:"rowSpace input"},R=n(()=>s("div",{style:{height:"82px"}},null,-1)),$=_("\u767B\u5F55"),U={class:"wrapper"},z={class:"overCenterV"},F=n(()=>s("div",{class:"marginV",style:{"--mH":"38px"}},null,-1)),L=n(()=>s("text",{class:"norText"},"\u60A8\u4E0D\u662F\u6211\u4EEC\u7684\u5458\u5DE5",-1)),N=n(()=>s("div",{class:"marginV",style:{"--mH":"80px"}},null,-1));function q(t,e,c,a,o,h){const p=d("van-field"),u=d("van-button"),m=d("van-overlay"),g=d("van-config-provider");return y(),S(g,{"theme-vars":o.themes},{default:r(()=>[s("div",B,[D,P,l(p,{class:"input",modelValue:o.phone,"onUpdate:modelValue":e[0]||(e[0]=i=>o.phone=i),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7",type:"number"},null,8,["modelValue"]),H,s("div",M,[l(p,{modelValue:o.code,"onUpdate:modelValue":e[1]||(e[1]=i=>o.code=i),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",type:"number"},null,8,["modelValue"]),l(u,{onClick:h.sendCodeClick,type:"default",size:"large",class:"sendCodeV",style:C(o.isSending?"--c:rgba(0,0,0,0.3);--fc:white":"--c:rgba(221, 255, 85, 1);--fc:#1b1b1b")},{default:r(()=>[_(k(o.sendText),1)]),_:1},8,["onClick","style"])]),R,l(u,{class:"loginBtn",onClick:h.loginClick},{default:r(()=>[$]),_:1},8,["onClick"]),l(m,{show:o.notMyShow,onClick:e[3]||(e[3]=i=>o.notMyShow=!1)},{default:r(()=>[s("div",U,[s("div",z,[F,L,N,s("text",{class:"blackBtn",onClick:e[2]||(e[2]=i=>o.notMyShow=!1)},"\u786E\u5B9A")])])]),_:1},8,["show"])])]),_:1},8,["theme-vars"])}var W=v(I,[["render",q],["__scopeId","data-v-d0e4925e"]]);export{W as default};
