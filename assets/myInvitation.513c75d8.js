import{d as h}from"./dayjs.min.deeea29e.js";import{_ as d,a1 as m,o as g,c as u,d as s,t as c}from"./index.2a5fd15a.js";import{Q as v,h as l}from"./wxqrcode.b0f8daaf.js";var p="./assets/powerOfAttorney.4003cf9b.png",w="./assets/officialSeal.5f8dbe9d.png",f="./assets/poster_back.794b5e76.png";const _={data(){return{cardNumber:"",signDate:"",userData:m,codeImg:"",loop:0,longClickShow:!1}},mounted(){var e=this.createUuid(16,16);this.cardNumber=e,this.signDate=h().format("YYYY\u5E74 MM\u6708 DD\u65E5"),setTimeout(()=>{this.exportCardImg();var t=`https://mp.tsporting.com/gymWechat/joinUs?sN=${this.userData.name}`;let i=v.createQrCodeImg(t,{size:parseInt(80)});this.codeImg=i,console.log("\u4E8C\u7EF4\u7801",i),setTimeout(()=>{this.exportPosterImg()},1e3)},1500)},methods:{handlerTouchstart(e){return this.loop=setTimeout(()=>{this.loop=0,this.longClickShow=!0,e==0?this.downs(!1):this.downs(!0)},500),!1},handlerTouchmove(e){clearTimeout(this.loop),this.loop=0},handlerTouchend(e){clearTimeout(this.loop),this.loop!==0&&(this.longClickShow=!1)},exportCardImg(){l(this.$refs.cardImgV,{useCORS:!0,logging:!0}).then(e=>{var t=e.toDataURL("image/jpeg");this.cardImg=t})},exportPosterImg(){l(this.$refs.posterImgV,{useCORS:!0,logging:!0}).then(e=>{var t=e.toDataURL("image/jpeg");this.posterImg=t})},downs(e){var t=document.createElement("a");t.href=e?this.posterImg:this.cardImg,t.download=e?"poster":"card",t.click()},createUuid(e,t){var i="0123456789975379".split(""),r=[],o;if(t=t||i.length,e)for(o=0;o<e;o++)r[o]=i[0|Math.random()*t];else{var a;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",o=0;o<36;o++)r[o]||(a=0|Math.random()*16,r[o]=i[o==19?a&3|8:a])}return r.join("")}}},b={class:"container"},I=s("view",{class:"mt20"},null,-1),x=s("img",{class:"back",src:p},null,-1),T={class:"name"},k={class:"cardNumber"},D={class:"signDate"},y=s("view",{class:"seal"},[s("img",{src:w})],-1),C=s("view",{class:"mt20"},null,-1),N=s("img",{class:"back",src:f},null,-1),S=["src"];function U(e,t,i,r,o,a){return g(),u("view",b,[I,s("view",{class:"card",ref:"cardImgV",onTouchstart:t[0]||(t[0]=n=>a.handlerTouchstart(0)),onTouchmove:t[1]||(t[1]=n=>a.handlerTouchmove()),onTouchend:t[2]||(t[2]=n=>a.handlerTouchend())},[x,s("text",T,c(o.userData.name),1),s("view",k,[s("text",null,"\u8BC1\u4E66\u7F16\u53F7: "+c(o.cardNumber),1)]),s("view",D,[s("text",null,"\u7B7E\u7EA6\u65E5\u671F: "+c(o.signDate),1)]),y],544),C,s("view",{class:"poster",ref:"posterImgV",onTouchstart:t[3]||(t[3]=n=>a.handlerTouchstart(1)),onTouchmove:t[4]||(t[4]=n=>a.handlerTouchmove()),onTouchend:t[5]||(t[5]=n=>a.handlerTouchend())},[N,s("img",{class:"qrcode",src:o.codeImg},null,8,S)],544)])}var z=d(_,[["render",U]]);export{z as default};
